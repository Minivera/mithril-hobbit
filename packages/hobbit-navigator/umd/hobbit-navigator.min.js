!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("path-to-regexp"),require("mithril")):"function"==typeof define&&define.amd?define(["path-to-regexp","mithril"],t):e.HobbitNavigator=t(null,e.Mithril)}(this,function(e,t){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t;var n={hashbanged:!1,location:null,hashbangPrefix:"#!"},o=function(){return"undefined"!=typeof window&&window.document?!(!window.history||!window.history.pushState)||(console.warn("It seems you are not using a browser with HTML5 history\n            support. Hobbit-navigator will cause the page to refresh rather\n            than navigate smoothly. Use a polyfil to prevent this issue."),!1):(console.warn("The history API for hobbit-navigator was executed on the\n            server, if this is an expected bahavior (For example, when using SSR),\n            set the location manually to display the intended content."),!1)},r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};babelHelpers.classCallCheck(this,t),this.configuration=Object.assign({},n,e),this.supported=o();var r=this.configuration,i=r.hashbanged,a=r.hashbangPrefix,s=r.location;s?this.location="object"===(void 0===s?"undefined":babelHelpers.typeof(s))?s:{path:s,url:""+(i?a:"")+s,pattern:s,params:{},sender:""}:this.setLocationFromHref(),i&&window.addEventListener("hashchange",this.setLocationFromHref.bind(this))}return t.prototype.setLocationFromHref=function(){var e=this.configuration,t=e.hashbanged,n=e.hashbangPrefix,o=document.createElement("a");o.href=window.location.href;var r=t?o.hash.replace(n,""):o.pathname;this.location={path:r,url:t?o.hash:o.pathname,pattern:r,params:{},sender:""}},t.prototype.getLocation=function(){return this.location},t.prototype.getState=function(){return window.history.state||{}},t.prototype.extractParams=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.loose,o=void 0!==n&&n,r=t.caseSensitive,i=void 0===r||r,a=t.strict,s=void 0!==a&&a,h=this.executePattern(this.location.path,e,{end:!o,sensitive:i,strict:s}),c=h.match,l=h.keys;if(null===c)return null;var u=c.slice(1);return l.reduce(function(e,t,n){return e[t.name]=u[n],e},{})},t.prototype.executePattern=function(t,n,o){var r=[];return{keys:r,match:e(n,r,o).exec(t)}},t.prototype.navigate=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.params,r=void 0===o?{}:o,i=n.sender,a=void 0===i?"":i,s=n.force,h=void 0!==s&&s,c=n.options,l=(void 0===c?{}:c).replace||!1,u=e.compile(t)(r);(h||u!==this.location.path)&&this.navigatePure(u,r,{sender:a,replace:l,pattern:t})},t.prototype.navigatePure=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.sender,r=void 0===o?"":o,i=n.replace,a=void 0!==i&&i,s=n.pattern,h=this.configuration,c=h.hashbanged,l=h.hashbangPrefix,u=""+(c?l:"")+e;if(s||(s=e),this.location={path:e,pattern:s,url:u,sender:r,params:t},this.supported)a?window.history.replaceState(t,null,u):window.history.pushState(t,null,u);else{if(a)return void console.warn("The replace option is not available for browsers not\n                supporting the HTML5 history API.");window.location.href=u}},t.prototype.compare=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.loose,o=void 0!==n&&n,r=t.caseSensitive,i=void 0===r||r,a=t.strict,s=void 0!==a&&a,h=this.executePattern(this.location.path,e,{end:!o,sensitive:i,strict:s}).match;if(!h)return!1;var c=h[0];return!!o||new RegExp(this.location.path,i?"":"i").test(c)},t}(),i=void 0,a={oncreate:function(){window.addEventListener("hashchange",this.redrawNode.bind(this))},onremove:function(){window.removeEventListener("hashchange",this.redrawNode.bind(this))},redrawNode:function(){t.redraw()},view:function(e){return e.children}};function s(){var e=[],n={};if(arguments.length<1)return console.error("The 'r' function expects at least one argument"),null;if(arguments[0].constructor===Array?(e=arguments[0],arguments.length>1&&"object"===babelHelpers.typeof(arguments[1])&&(n=arguments[1])):arguments.length>1&&(e=[[arguments[0],arguments[1]]],arguments.length>2&&"object"===babelHelpers.typeof(arguments[2])&&(n=arguments[2])),!i)return console.error("The router was not initialized using 'createRouter'\n            before trying to render a route."),null;for(var o in e){var r=e[o][0],s=e[o][1],h=e[o][2];if(i.compare(r,n))return"object"===(void 0===s?"undefined":babelHelpers.typeof(s))&&s.tag?t(a,[Object.assign({},s,{attrs:babelHelpers.extends({},s.attrs,{location:i.getLocation(),params:Object.assign({},i.getState(),i.extractParams(r,n))},h)})]):t(a,[t(s,babelHelpers.extends({location:i.getLocation(),params:Object.assign({},i.getState(),i.extractParams(r,n))},h))])}return null}return s.createRouter=function(e){i=new r(e)},s.getLocation=function(){return i?i.getLocation():(console.error("The router was not initialized using 'createRouter'\n            before trying to render a route."),null)},s.navigate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!i)return console.error("The router was not initialized using 'createRouter'\n            before trying to render a route."),null;i.navigate(e,Object.assign({},{params:t},n))},s});
