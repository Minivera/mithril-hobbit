!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("mithril")):"function"==typeof define&&define.amd?define(["exports","mithril"],n):n(t.HobbitNavigator={},t.Mithril)}(this,function(t,n){"use strict";n=n&&n.hasOwnProperty("default")?n.default:n;var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},i=function t(n,o,i){var r;return"object"!==(void 0===n?"undefined":e(n))?n:Object.assign({},n,((r={})[o[0]]=o.length>1?t(n[o[0]],o.slice(1),i):i,r))},r=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t),this.data=n}return t.prototype.set=function(t,n){this.data=i(this.data,t.split("."),n)},t.prototype.remove=function(t){this.data=i(this.data,t.split("."),void 0)},t.prototype.find=function(t){var n=this.data,e=t.split(".");for(var o in e){if(!n[o=e[o]])return;n=n[o]}return n},t.prototype.clear=function(){this.data={}},t.prototype.all=function(){return this.data},t}(),u=void 0,c=[],f=function(t){c.forEach(function(n){n.notify&&n.notify(t)})},s={createStore:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return u=n?new n(t):new r(t),this},getState:function(){return u?u.all():(console.warn("The store hasn't yet ben set for hobbit-archivist.\n                Set the store using 'createStore' before trying to access it."),null)},subscribe:function(t){return c.push(t)-1},unsubscribe:function(t){c.splice(t,1)},find:function(t){return u.find(t)},set:function(t,n){u.set(t,n),f(t)},remove:function(t){u.remove(t),f(t)},reset:function(){u.clear()}};t.Store=s,t.subscribe=function(t,e){if(null==t.view&&"function"!=typeof t)throw new Error("subscribe(component, path) expects a component, \n            not a vnode.");var o=s.subscribe({notify:function(n){e.includes(n)&&t.onstatechanged&&t.onstatechanged(s.find(n))}});return{view:function(){return n(t,{state:s.find(e),unsubscribe:function(){s.unsubscribe(o)}})}}},t.bind=function(t,e){if(null==t.view&&"function"!=typeof t)throw new Error("bind(component, path) expects a component, \n            not a vnode.");return{view:function(){var o=s.find(e);return n(t,{state:o})}}},Object.defineProperty(t,"__esModule",{value:!0})});
